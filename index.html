<!DOCTYPE HTML>
<html lang="EN">
	<head>
		<meta charset="UTF-8">
		<title>DataBat</title>
		<link rel="icon" type="image/png" href="img/bat.ico"/>
		<link rel = "schema.DC" href = "http://purl.org/DC/elements/1.0/">
		<meta name = "DC.Title" content = "Sienna">
		<meta name = "DC.Creator" content = "Hadrien PARIS">
		<meta name = "DC.Type" content = "blog">
		<meta name = "DC.Date" content = "2021">
		<meta name = "DC.Format" content = "text/html">
		<meta name = "DC.Language" content = "en">
    <link rel="stylesheet" href="style/bootstrap.min.css">
		<link rel="stylesheet" href="style/style.css">
		<script src="script/script.js"> </script>
		<style>
			@font-face
			{
				font-family: 'Quicksand';
				src: url('fonts/Quicksand_Light.otf');
			}
		</style>
	</head>
	<body class="container-fluid" style="background-color : #f3d7b2 ">
			<div class="my-2 mx-auto">
				<a class="fs-1 col-4" id="databat" href='https://databat.github.io'>DATABAT</a>
				<img id="bat" class="mx-2" src="img/bat2.png" alt="">
			</div>
      <form class="mb-4" id="form" onsubmit="fieldsVerification(); return false;">
        <div class="form-group my-2" style="background-color :  ">
          <p class="fs-6 mx-0 my-0">DONNEES ▼</p>
          <input type='text' id='ORIGINE' class="p-2 my-1" placeholder='ORIGINE'/>
          <input type='text' id='IDENTIFIANT' class="p-2 my-1" placeholder='IDENTIFIANT'/>
          <input type='text' id='OBSERVATEUR' class="p-2 my-1" placeholder='OBSERVATEUR'/>
          <input type='text' id='OBSERVATEUR2' class="p-2 my-1" placeholder='ACCOMPAGNANT(S)'/>
        </div>

        <div class="form-group my-2" style="background-color : ">
          <p class="fs-6 mx-0 my-0">LOCALISATION ▼</p>
          <input type='text' id='LIEU_DIT' class="p-2 my-1" placeholder='LIEU-DIT'/>
          <input type='text' id='COMMUNE' class="p-2 my-1" placeholder='COMMUNE'/>
          <input type='text' id='DEPARTEMENT' class="p-2 my-1" placeholder='DEPARTEMENT'/>
          <input type='text' id='REGION' class="p-2 my-1" placeholder='REGION'/>
        </div>

        <div class="form-group my-2" style="background-color : ">
          <p class="fs-6 mx-0 my-0">DONNEES CAPTURE ▼</p>
          <input type='text' id='METEO' class="p-2 my-1" placeholder='METEO'/>
          <input type='text' id='TEMPERATURE' class="p-2 my-1" placeholder='TEMPERATURE'/>
          <input type='text' id='LUNE' class="p-2 my-1" placeholder='LUNE'/>
          <input type='text' id='VENT' class="p-2 my-1" placeholder='VENT'/>
          <input type='text' id='NEBULOSITE' class="p-2 my-1" placeholder='NEBULOSITE'/>
          <input type='text' id='HYGROMETRIE' class="p-2 my-1" placeholder='HYGROMETRIE'/>
        </div>
        <div class="form-group my-2" style="background-color : ">
          <input type='text' id='CONTEXTE_CAPTURE' class="p-2 my-1" placeholder='Contexte capture'/>
          <input type='text' id='HEURE_POSE_FILETS' class="p-2 my-1" placeholder='Début capture - 00h00'/>
          <input type='text' id='HEURE_ARRET_FILETS' class="p-2 my-1" placeholder='Fin capture - 00h00'/>
          <input type='text' id='NB_FILETS' class="p-2 my-1" placeholder='Nombre filets'/>
          <input type='text' id='LONG_FILETS' class="p-2 my-1" placeholder='Longueur filets'/>
          <input type='text' id='SURFACE_FILETS' class="p-2 my-1"  placeholder='Surface filets'/>
        </div>

        <div class="form-group my-2" style="background-color : ">
          <p class="fs-6  mx-0 my-0">DESCRIPTION ▼</p>
          <input type='text' id='TAXON' class="p-2 my-1" placeholder='TAXON'/>
          <input type='text' id='BIOTOPE' class="p-2 my-1" placeholder='BIOTOPE'/>
          <input type='text' id='SEXE' class="p-2 my-1" placeholder='SEXE - M/F'/>
          <input type='text' id='AGE' class="p-2 my-1" placeholder='AGE'/>
        </div>

        <div class="form-group my-2" style="background-color : ">
          <p class="fs-6 mx-0 my-0">MESURES ▼</p>
          <input type='text' id='POIDS' class="p-2 my-1" placeholder='POIDS - x.y (g)'/>
          <input type='text' id='AB' class="p-2 my-1" placeholder='AB - x.y'/>
          <input type='text' id='D5' class="p-2 my-1" placeholder='D5 - x.y'/>
          <input type='text' id='D3' class="p-2 my-1" placeholder='D3 - x.y'/>
          <input type='text' id='D1' class="p-2 my-1" placeholder='D1 - x.y'/>
          <input type='text' id='CM3' class="p-2 my-1" placeholder='CM3 - x.y'/>
        </div>
        <div class="form-group my-2">
          <input type='text' id='POUCE' class="p-2 my-1" placeholder='POUCE - x.y'/>
          <input type='text' id='QUEUE' class="p-2 my-1" placeholder='QUEUE - x.y'/>
          <input type='text' id='TIBIA' class="p-2 my-1" placeholder='TIBIA - x.y'/>
          <input type='text' id='PIED' class="p-2 my-1" placeholder='PIED - x.y'/>
          <input type='text' id='GRIFFE' class="p-2 my-1" placeholder='GRIFFE - x.y'/>
          <input type='text' id='METHODE_DOIGTS' class="p-2 my-1" placeholder='METHODE_DOIGTS'/>
        </div>
        <div class="form-group my-2">
          <input type='text' id='LONG_OREILLE' class="p-2 my-1" placeholder='LONG_OREILLE - x.y'/>
          <input type='text' id='LARG_OREILLE' class="p-2 my-1" placeholder='LARG_OREILLE - x.y'/>
          <input type='text' id='LONG_TRAGUS' class="p-2 my-1" placeholder='LONG_TRAGUS - x.y'/>
          <input type='text' id='LARG_TRAGUS' class="p-2 my-1" placeholder='LARG_TRAGUS - x.y'/>
        </div>

        <div class="form-group my-2" style="background-color : ">
          <p class="fs-6 mx-0 my-0">OBSERVATIONS ▼</p>
          <input type='text' id='STATUT_REPRO' class="p-2 my-1" placeholder='STATUT_REPRO'/>
          <input type='text' id='TEST' class="p-2 my-1" placeholder='TESTICULES'/>
          <input type='text' id='EPID' class="p-2 my-1" placeholder='EPID'/>
          <input type='text' id='TV' class="p-2 my-1" placeholder='TUNIQUE VAGINALE'/>
          <input type='text' id='GESTATION' class="p-2 my-1" placeholder='GESTATION'/>
          <input type='text' id='MAMELLES' class="p-2 my-1" placeholder='MAMELLES'/>
          <input type='text' id='CHIN_SPOT' class="p-2 my-1" placeholder='CHIN_SPOT'/>
          <input type='text' id='EPIPH' class="p-2 my-1" placeholder='EPIPH'/>
          <input type='text' id='TAILLE_GLANDES' class="p-2 my-1" placeholder='TAILLE_GLANDES'/>
          <input type='text' id='USURE_DENTS' class="p-2 my-1" placeholder='USURE_DENTS'/>
        </div>

        <div class="form-group my-2 row mx-auto">
          <div class="form-check col-xl-2 col-lg-3 col-md-3 col-sm-12">
            <label for="BLESSURES">BLESSURES</label>
            <input type="checkbox" id="BLESSURES" class="form-check-input">
          </div>
          <div class="form-check col-xl-2 col-lg-3 col-md-3 col-sm-12">
            <label for="MARQUAGES">MARQUAGES</label>
            <input type="checkbox" id="MARQUAGES" class="form-check-input">
          </div>
        </div>

        <div class="form-group my-2 row mx-auto">
          <div class="form-check col-xl-2 col-lg-2 col-md-2 col-sm-12">
            <label for="PARASITES">PARASITES</label>
            <input type="checkbox" id="PARASITES" class="form-check-input">
          </div>
          <div class="form-check col-xl-2 col-lg-2 col-md-2 col-sm-12">
            <label for="PUCES">PUCES</label>
            <input type="checkbox" id="PUCES" class="form-check-input">
          </div>
          <div class="form-check col-xl-2 col-lg-2 col-md-2 col-sm-12">
            <label for="TIQUES">TIQUES</label>
            <input type="checkbox" id="TIQUES" class="form-check-input">
          </div>
          <div class="form-check col-xl-2 col-lg-2 col-md-2 col-sm-12">
            <label for="ACARIENS">ACARIENS</label>
            <input type="checkbox" id="ACARIENS" class="form-check-input">
          </div>
          <div class="form-check col-xl-2 col-lg-2 col-md-2 col-sm-12">
            <label for="NYCT">NYCT</label>
            <input type="checkbox" id="NYCT" class="form-check-input">
          </div>
          <div class="form-check col-xl-2 col-lg-2 col-md-2 col-sm-12">
            <label for="CIMEX">CIMEX</label>
            <input type="checkbox" id="CIMEX" class="form-check-input styled">
          </div>
        </div>

	     	<p class="fs-6 mx-0 my-0">COMMENTAIRES ▼</p>
				<div class="row">
					<div class="col-xl-6 col-lg-6 col-md-12 col-sm-12">
						<textarea class="form-control mx-auto my-auto" rows="2" id='COMMENT'></textarea>
					</div>
					<div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 my-3">
						<button type="submit" class="btn btn-warning mx-auto ">ENREGISTRER</button>
						<button id="dark_mode_button" onclick="imageOpen()" class="btn btn-warning mx-auto" type="button">GRILLE DES VALEURS</button>
						<button id="dark_mode_button" onclick="helpOpen()" class="btn btn-warning mx-auto" type="button">AIDE</button>
						<a class="btn btn-warning mx-auto" href='mailto:Hadrien.paris@icloud.com'>CONTACT</a>
					</div>
				</div>
      </form>

			<div id="img_div">
				<img id="image" class="mx-auto my-2" src="img/img1.png" alt="Grille de valeurs">
			</div>

			<div id="help_div">
				<p class="fs-6 fw-bold my-2">
					Ce site doit être utilisé avec Mozilla Firefox afin de faire fonctionner la persistance des données.
					<br>
					Pensez à actualiser la page (touche F5) avant de cliquer sur le bouton ENREGISTRER via Mozilla, les données saisies ne seront pas effacées.
					<br>
					Plusieurs niveaux de détection d'erreurs sont mis en place sur ce site, il faut obligatoirement remplir les champs TAXON, SEXE, et POIDS.
					<br>
					Le champ TAXON doit être rempli avec les trois premières lettres du nom de l'espèce, exemple : MYO MYO ou PIP PIP.
					<br>
					Le champ SEXE doit être rempli avec M ou F.
					<br>
					Si des erreurs au niveau du POIDS et des mesures AB, CM3, D5, D3 et D1 sont detectées, une alerte apparaîtra au milieu de l'écran vous l'indiquant.
					<br>
					Vous pouvez forcer le passage de la valeur même si cette dernière est hors bornes.
					<br>
					Une fois les données saisies et la page actualisée, vous pouvez enregistrer le formulaire, un fichier text (.txt) va alors se télécharger dans votre navigateur.
					<br>
					Ce fichier horodaté contient les informations saisies relatives à la capture.
					<br>
					Pour toute demande relative ce site, n'hésitez pas à contacter le webmaster : hadrien.paris@icloud.com avec "Aide DataBat" en objet de mail.
					<br>
					Le code de ce site est disponible sur la page Github de ce projet : https://github.com/DataBat2/databat2.github.io
				</p>
			</div>

		<script>
		let ORIGINE = document.getElementById("ORIGINE").value;
		let IDENTIFIANT = document.getElementById("IDENTIFIANT").value;
		let OBSERVATEUR = document.getElementById("OBSERVATEUR").value;
		let OBSERVATEUR2 = document.getElementById("OBSERVATEUR2").value;
		let LIEU_DIT = document.getElementById("LIEU_DIT").value;
		let COMMUNE = document.getElementById("COMMUNE").value;
		let DEPARTEMENT = document.getElementById("DEPARTEMENT").value;
		let REGION = document.getElementById("REGION").value;
		let METEO = document.getElementById("METEO").value;
		let TEMPERATURE = document.getElementById("TEMPERATURE").value;
		let VENT = document.getElementById("VENT").value;
		let LUNE = document.getElementById("LUNE").value;
		let HYGROMETRIE = document.getElementById("HYGROMETRIE").value;
		let NEBULOSITE = document.getElementById("NEBULOSITE").value;
		let CONTEXTE_CAPTURE = document.getElementById("CONTEXTE_CAPTURE").value;
		let SEXE = document.getElementById("SEXE").value;
		let AGE = document.getElementById("AGE").value;
		let BIOTOPE = document.getElementById("BIOTOPE").value;
		let TAXON = document.getElementById("TAXON").value;
		let D1 = document.getElementById("D1").value;
		let AB = document.getElementById("AB").value;
		let D3 = document.getElementById("D3").value;
		let D5 = document.getElementById("D5").value;
		let METHODE_DOIGTS = document.getElementById("METHODE_DOIGTS").value;
		let POUCE = document.getElementById("POUCE").value;
		let POIDS = document.getElementById("POIDS").value;
		let QUEUE = document.getElementById("QUEUE").value;
		let TIBIA = document.getElementById("TIBIA").value;
		let PIED = document.getElementById("PIED").value;
		let LONG_OREILLE = document.getElementById("LONG_OREILLE").value;
		let LARG_OREILLE = document.getElementById("LARG_OREILLE").value;
		let LONG_TRAGUS = document.getElementById("LONG_TRAGUS").value;
		let LARG_TRAGUS = document.getElementById("LARG_TRAGUS").value;
		let GRIFFE = document.getElementById("GRIFFE").value;
		let CM3 = document.getElementById("CM3").value;
		let STATUT_REPRO = document.getElementById("STATUT_REPRO").value;
		let GESTATION = document.getElementById("GESTATION").value;
		let MAMELLES = document.getElementById("MAMELLES").value;
		let CHIN_SPOT = document.getElementById("CHIN_SPOT").value;
		let TAILLE_GLANDES = document.getElementById("TAILLE_GLANDES").value;
		let USURE_DENTS = document.getElementById("USURE_DENTS").value;
		let HEURE_POSE_FILETS = document.getElementById("HEURE_POSE_FILETS").value;
		let HEURE_ARRET_FILETS = document.getElementById("HEURE_ARRET_FILETS").value;
		let NB_FILETS = document.getElementById("NB_FILETS").value;
		let LONG_FILETS = document.getElementById("LONG_FILETS").value;
		let SURFACE_FILETS = document.getElementById("SURFACE_FILETS").value;
		let TEST = document.getElementById("TEST").value;
		let TV = document.getElementById("TV").value;
		let EPIPH = document.getElementById("EPIPH").value;
		let EPID = document.getElementById("EPID").value;
		let BLESSURES = document.getElementById("BLESSURES").checked;
		let MARQUAGES = document.getElementById("MARQUAGES").checked;
		let PARASITES = document.getElementById("PARASITES").checked;
		let PUCES = document.getElementById("PUCES").checked;
		let TIQUES = document.getElementById("TIQUES").checked;
		let ACARIENS = document.getElementById("ACARIENS").checked;
		let NYCT = document.getElementById("NYCT").checked;
		let CIMEX = document.getElementById("CIMEX").checked;
		let COMMENT = document.getElementById("COMMENT").value;

		function fieldsVerification(){
			if(TAXON == "PIP PIP"){
				if(POIDS < 3.0 || POIDS > 8.0){
					window.alert("POIDS invalide");
					console.log("POIDS invalide");
				} // POIDS
				else{
					if(SEXE == "M"){
						if(AB < 29.2 || AB > 32.8){
							errorGenerator(TAXON, SEXE, "AB");
						}
						else if(D5 < 36.6 || D5 > 43.0){
							errorGenerator(TAXON, SEXE, "D5");
						}
						else if(D3 < 50.0 || D3 > 59.0){
							errorGenerator(TAXON, SEXE, "D3");
						}
						else if(MAMELLES != "" || GESTATION != ""){
							errorGenerator(TAXON, SEXE, "Données relatives aux femelles rentrées par erreur");
						}
						else{
							saveFile();
						}
					} // M pippip
					else if(SEXE == "F"){
						if(AB < 29.8 || AB > 33.6){
							errorGenerator(TAXON, SEXE, "AB");
						}
						else if(D5 < 38.0 || D5 > 44.0){
							errorGenerator(TAXON, SEXE, "D5");
						}
						else if(D3 < 51.0 || D3 > 59.0){
							errorGenerator(TAXON, SEXE, "D3");
						}
						else if(TEST != "" || EPID != "" || TV != ""){
							errorGenerator(TAXON, SEXE, "Données relatives aux mâles rentrées par erreur");
						}
						else{
							saveFile();
						}
					} // F pipip
					else if(SEXE == ""){
						window.alert("SEXE invalide (à ignorer si bien renseigné)");
					}
					else{
						console.log("SEXE invalide");
					}
				}
			}
			else if(TAXON == "PIP KUH"){
				if(POIDS < 3.0 || POIDS > 10.0){
					window.alert("POIDS invalide");
					console.log("POIDS invalide");
				} // POIDS
				else{
					if(SEXE == "M"){
						if(AB < 30.1 || AB > 35.5){
							errorGenerator(TAXON, SEXE, "AB");
						}
						else if(D5 < 38.5 || D5 > 48.6){
							errorGenerator(TAXON, SEXE, "D5");
						}
						else if(D3 < 52.0 || D3 > 64.0){
							errorGenerator(TAXON, SEXE, "D3");
						}
						else if(MAMELLES != "" || GESTATION != ""){
							errorGenerator(TAXON, SEXE, "Données relatives aux femelles rentrées par erreur");
						}
						else{
							saveFile();
						}
					} // M pippip
					if(SEXE == "F"){
						if(AB < 31.4 || AB > 36.6){
							errorGenerator(TAXON, SEXE, "AB");
						}
						else if(D5 < 40.4 || D5 > 50.0){
							errorGenerator(TAXON, SEXE, "D5");
						}
						else if(D3 < 54.0 || D3 > 66.0){
							errorGenerator(TAXON, SEXE, "D3");
						}
						else if(TEST != "" || EPID != "" || TV != ""){
							errorGenerator(TAXON, SEXE, "Données relatives aux mâles rentrées par erreur");
						}
						else{
							saveFile();
						}
					} // F pipip
					else if(SEXE == ""){
						window.alert("SEXE invalide (à ignorer si bien renseigné)");
					}
					else{
						console.log("SEXE invalide");
					}
				}
			}
			else if(TAXON == "PLE AUR"){
				if(POIDS < 5.5 || POIDS > 12.5){
					window.alert("POIDS invalide");
					console.log("POIDS invalide");
				} // POIDS
				else{
					if(SEXE == "M"){
						if(AB < 36.2 || AB > 41.0){
							errorGenerator(TAXON, SEXE, "AB");
						}
						else if(D5 < 48.0 || D5 > 55.0){
							errorGenerator(TAXON, SEXE, "D5");
						}
						else if(D3 < 60.0 || D3 > 69.0){
							errorGenerator(TAXON, SEXE, "D3");
						}
						else if(D1 < 5.8 || D1 > 8.3){
							errorGenerator(TAXON, SEXE, "D1");
						}
						else if(TIBIA < 17.2 || TIBIA > 20.9){
							errorGenerator(TAXON, SEXE, "TIBIA");
						}
						else if(MAMELLES != "" || GESTATION != ""){
							errorGenerator(TAXON, SEXE, "Données relatives aux femelles rentrées par erreur");
						}
						else{
							saveFile();
						}
					} // M pippip
					if(SEXE == "F"){
						if(AB < 36.8 || AB > 42.1){
							errorGenerator(TAXON, SEXE, "AB");
						}
						else if(D5 < 49.0 || D5 > 57.2){
							errorGenerator(TAXON, SEXE, "D5");
						}
						else if(D3 < 62.0 || D3 > 73.0){
							errorGenerator(TAXON, SEXE, "D3");
						}
						else if(D1 < 5.8 || D1 > 8.3){
							errorGenerator(TAXON, SEXE, "D1");
						}
						else if(TIBIA < 17.2 || TIBIA > 21.0){
							errorGenerator(TAXON, SEXE, "TIBIA");
						}
						else if(TEST != "" || EPID != "" || TV != ""){
							errorGenerator(TAXON, SEXE, "Données relatives aux mâles rentrées par erreur");
						}
						else{
							saveFile();
						}
					} // F pipip
					else if(SEXE == ""){
						window.alert("SEXE invalide (à ignorer si bien renseigné)");
					}
					else{
						console.log("SEXE invalide");
					}
				}
			}
			else if(TAXON == "PLE AUS"){
				if(POIDS < 5.0 || POIDS > 16.0){
					window.alert("POIDS invalide");
					console.log("POIDS invalide");
				} // POIDS
				else{
					if(SEXE == "M"){
						if(AB < 37.2 || AB > 41.5){
							errorGenerator(TAXON, SEXE, "AB");
						}
						else if(D5 < 50.0 || D5 > 63.7){
							errorGenerator(TAXON, SEXE, "D5");
						}
						else if(D3 < 63.0 || D3 > 74.0){
							errorGenerator(TAXON, SEXE, "D3");
						}
						else if(D1 < 4.6 || D1 > 7.5){
							errorGenerator(TAXON, SEXE, "D1");
						}
						else if(TIBIA < 16.9 || TIBIA > 19.8){
							errorGenerator(TAXON, SEXE, "TIBIA");
						}
						else if(MAMELLES != "" || GESTATION != ""){
							errorGenerator(TAXON, SEXE, "Données relatives aux femelles rentrées par erreur");
						}
						else{
							saveFile();
						}
					} // M pippip
					if(SEXE == "F"){
						if(AB < 38.5 || AB > 42.5){
							errorGenerator(TAXON, SEXE, "AB");
						}
						else if(D5 < 50.0 || D5 > 58.1){
							errorGenerator(TAXON, SEXE, "D5");
						}
						else if(D3 < 63.0 || D3 > 75.0){
							errorGenerator(TAXON, SEXE, "D3");
						}
						else if(D1 < 4.9 || D1 > 7.0){
							errorGenerator(TAXON, SEXE, "D1");
						}
						else if(TIBIA < 17.8 || TIBIA > 20.2){
							errorGenerator(TAXON, SEXE, "TIBIA");
						}
						else if(TEST != "" || EPID != "" || TV != ""){
							errorGenerator(TAXON, SEXE, "Données relatives aux mâles rentrées par erreur");
						}
						else{
							saveFile();
						}
					} // F pipip
					else if(SEXE == ""){
						window.alert("SEXE invalide (à ignorer si bien renseigné)");
					}
					else{
						console.log("SEXE invalide");
					}
				}
			}
			else if(TAXON == "EPT SER"){
				if(POIDS < 15.0 || POIDS > 40.0){
					window.alert("POIDS invalide");
					console.log("POIDS invalide");
				} // POIDS
				else{
					if(SEXE == "M"){
						if(AB < 48.1 || AB > 54.2){
							errorGenerator(TAXON, SEXE, "AB");
						}
						else if(D5 < 58.0 || D5 > 72.0){
							errorGenerator(TAXON, SEXE, "D5");
						}
						else if(D3 < 78.5 || D3 > 97.0){
							errorGenerator(TAXON, SEXE, "D3");
						}
						else if(MAMELLES != "" || GESTATION != ""){
							errorGenerator(TAXON, SEXE, "Données relatives aux femelles rentrées par erreur");
						}
						else{
							saveFile();
						}
					} // M pippip
					if(SEXE == "F"){
						if(AB < 50.2 || AB > 56.0){
							errorGenerator(TAXON, SEXE, "AB");
						}
						else if(D5 < 61.0 || D5 > 72.0){
							errorGenerator(TAXON, SEXE, "D5");
						}
						else if(D3 < 81.4 || D3 > 99.0){
							errorGenerator(TAXON, SEXE, "D3");
						}
						else if(TEST != "" || EPID != "" || TV != ""){
							errorGenerator(TAXON, SEXE, "Données relatives aux mâles rentrées par erreur");
						}
						else{
							saveFile();
						}
					} // F pipip
					else if(SEXE == ""){
						window.alert("SEXE invalide (à ignorer si bien renseigné)");
					}
					else{
						console.log("SEXE invalide");
					}
				}
			}
			else if(TAXON == "MYO MYS"){
				if(POIDS < 3.0 || POIDS > 9.0){
					window.alert("POIDS invalide");
					console.log("POIDS invalide");
				} // POIDS
				else{
					if(SEXE == "M"){
						if(AB < 31.9 || AB > 36.1){
							errorGenerator(TAXON, SEXE, "AB");
						}
						else if(D5 < 39.9 || D5 > 48.8){
							errorGenerator(TAXON, SEXE, "D5");
						}
						else if(D3 < 51.0 || D3 > 60.0){
							errorGenerator(TAXON, SEXE, "D3");
						}
						else if(TIBIA < 14.6 || TIBIA > 17.6){
							errorGenerator(TAXON, SEXE, "TIBIA");
						}
						else if(MAMELLES != "" || GESTATION != ""){
							errorGenerator(TAXON, SEXE, "Données relatives aux femelles rentrées par erreur");
						}
						else{
							saveFile();
						}
					} // M pippip
					if(SEXE == "F"){
						if(AB < 32.2 || AB > 36.6){
							errorGenerator(TAXON, SEXE, "AB");
						}
						else if(D5 < 41.0 || D5 > 49.0){
							errorGenerator(TAXON, SEXE, "D5");
						}
						else if(D3 < 51.0 || D3 > 60.5){
							errorGenerator(TAXON, SEXE, "D3");
						}
						else if(TIBIA < 14.9 || TIBIA > 17.5){
							errorGenerator(TAXON, SEXE, "TIBIA");
						}
						else if(TEST != "" || EPID != "" || TV != ""){
							errorGenerator(TAXON, SEXE, "Données relatives aux mâles rentrées par erreur");
						}
						else{
							saveFile();
						}
					} // F pipip
					else if(SEXE == ""){
						window.alert("SEXE invalide (à ignorer si bien renseigné)");
					}
					else{
						console.log("SEXE invalide");
					}
				}
			}
			else if(TAXON == "MYO ALC"){
				if(POIDS < 3.0 || POIDS > 8.0){
					window.alert("POIDS invalide");
					console.log("POIDS invalide");
				} // POIDS
				else{
					if(SEXE == "M"){
						if(AB < 30.4 || AB > 33.5){
							errorGenerator(TAXON, SEXE, "AB");
						}
						else if(D5 < 39.0 || D5 > 48.0){
							errorGenerator(TAXON, SEXE, "D5");
						}
						else if(D3 < 49.1 || D3 > 56.7){
							errorGenerator(TAXON, SEXE, "D3");
						}
						else if(TIBIA < 13.6 || TIBIA > 15.9){
							errorGenerator(TAXON, SEXE, "TIBIA");
						}
						else if(MAMELLES != "" || GESTATION != ""){
							errorGenerator(TAXON, SEXE, "Données relatives aux femelles rentrées par erreur");
						}
						else{
							saveFile();
						}
					} // M pippip
					if(SEXE == "F"){
						if(AB < 30.6 || AB > 33.6){
							errorGenerator(TAXON, SEXE, "AB");
						}
						else if(D5 < 39.0 || D5 > 48.0){
							errorGenerator(TAXON, SEXE, "D5");
						}
						else if(D3 < 49.2 || D3 > 57.0){
							errorGenerator(TAXON, SEXE, "D3");
						}
						else if(TIBIA < 13.7 || TIBIA > 15.9){
							errorGenerator(TAXON, SEXE, "TIBIA");
						}
						else if(TEST != "" || EPID != "" || TV != ""){
							errorGenerator(TAXON, SEXE, "Données relatives aux mâles rentrées par erreur");
						}
						else{
							saveFile();
						}
					} // F pipip
					else if(SEXE == ""){
						window.alert("SEXE invalide (à ignorer si bien renseigné)");
					}
					else{
						console.log("SEXE invalide");
					}
				}
			}
			else if(TAXON == "MYO MYO"){
				if(POIDS < 20.0 || POIDS > 45.0){
					window.alert("POIDS invalide");
					console.log("POIDS invalide");
				} // POIDS
				else{
					if(SEXE == "M"){
						if(AB < 55.8 || AB > 63.2){
							errorGenerator(TAXON, SEXE, "AB");
						}
						else if(D5 < 72.0 || D5 > 85.0){
							errorGenerator(TAXON, SEXE, "D5");
						}
						else if(D3 < 91.1 || D3 > 107.0){
							errorGenerator(TAXON, SEXE, "D3");
						}
						else if(CM3 < 8.9 || CM3 > 10.4){
							errorGenerator(TAXON, SEXE, "CM3");
						}
						else if(MAMELLES != "" || GESTATION != ""){
							errorGenerator(TAXON, SEXE, "Données relatives aux femelles rentrées par erreur");
						}
						else{
							saveFile();
						}
					} // M pippip
					if(SEXE == "F"){
						if(AB < 58.0 || AB > 65.7){
							errorGenerator(TAXON, SEXE, "AB");
						}
						else if(D5 < 76.0 || D5 > 89.0){
							errorGenerator(TAXON, SEXE, "D5");
						}
						else if(D3 < 88.0 || D3 > 112.0){
							errorGenerator(TAXON, SEXE, "D3");
						}
						else if(CM3 < 9.0 || CM3 > 10.6){
							errorGenerator(TAXON, SEXE, "CM3");
						}
						else if(TEST != "" || EPID != "" || TV != ""){
							errorGenerator(TAXON, SEXE, "Données relatives aux mâles rentrées par erreur");
						}
						else{
							saveFile();
						}
					} // F pipip
					else if(SEXE == ""){
						window.alert("SEXE invalide (à ignorer si bien renseigné)");
					}
					else{
						console.log("SEXE invalide");
					}
				}
			}

			/* Code à intégrer en dessous de cette ligne */

			else if(TAXON == "NOM ESPECE"){
				if(POIDS < 1|| POIDS > 2){
					window.alert("POIDS invalide");
					console.log("POIDS invalide");
				} // POIDS
				else{
					if(SEXE == "M"){
						if(AB < 1 || AB > 1){
							errorGenerator(TAXON, SEXE, "AB");
						}
						else if(D5 < 1 || D5 > 1){
							errorGenerator(TAXON, SEXE, "D5");
						}
						else if(D3 < 1 || D3 > 1){
							errorGenerator(TAXON, SEXE, "D3");
						}
						else{
							saveFile();
						}
					} // M pippip
					if(SEXE == "F"){
						if(AB < 1 || AB > 1){
							errorGenerator(TAXON, SEXE, "AB");
						}
						else if(D5 < 1 || D5 > 1){
							errorGenerator(TAXON, SEXE, "D5");
						}
						else if(D3 < 1 || D3 > 1){
							errorGenerator(TAXON, SEXE, "D3");
						}
						else{
							saveFile();
						}
					} // F pipip
					else if(SEXE == ""){
						window.alert("SEXE invalide (à ignorer si bien renseigné)");
					}
					else{
						console.log("SEXE invalide");
					}
				}
			}

			/* Code à intégrer au dessus de cette ligne */

			else{
				window.alert("Pas de TAXON renseigné");
				console.log("No TAXON given");
			}
		} // Fin fct fieldsVerification()

		function saveFile(){
			if(SEXE == "M")
		    SEXE = "masculin";
		  else if(SEXE == "F")
		    SEXE = 'feminin';
			let today = new Date();
			let date = today.getDate()+'/'+(today.getMonth()+1)+'/'+today.getFullYear();
			let time = today.getHours() + "h" + today.getMinutes();
			let record =
				"----------------------------------------------------------------------------" + "\n" +
				"Enregistrement effectué le " + date + " à " + time + "." + "\n" +
				"----------------------------------------------------------------------------" + "\n" +
				"Origine : " + ORIGINE + ", Identifiant : " + IDENTIFIANT + "\n" +
				"Observateur principal : " + OBSERVATEUR + "\n" +
				"Accompagnant(s) : " + OBSERVATEUR2 + "\n" +
				"----------------------------------------------------------------------------" + "\n" +
				"Localisation de la capture : " + LIEU_DIT + ", " + COMMUNE + ", " + DEPARTEMENT + ", " + REGION + ".\n" +
				"----------------------------------------------------------------------------" + "\n" +
				"Contexte de la capture : " + CONTEXTE_CAPTURE + "\n" +
				"Capture effectuée de " + HEURE_POSE_FILETS + " à " + HEURE_ARRET_FILETS + "\n" +
				NB_FILETS + " filets posés, longueur : " + LONG_FILETS + " mètres, surface : " + SURFACE_FILETS + " mètres carrés \n" +
				"----------------------------------------------------------------------------" + "\n" +
				"Données de l'individu : " + TAXON + ", de sexe " + SEXE + ", et d'age estimé : " + AGE + "\n" +
				"----------------------------------------------------------------------------" + "\n" +
				"--> Mesures \n" +
				"Poids : " + POIDS + ' g \n' +
				"Avant-bras : " + AB + " mm \n" +
				"D5 : " + D5 + " mm, D3 : " + D3 + ' mm, D1 : ' + D1 + " mm \n" +
				"CM3 : " + CM3 + ' mm \n' +
				"----------------------------------------------------------------------------" + "\n" +
				"COMMENTAIRES : " + COMMENT + "\n" +
				"----------------------------------------------------------------------------" + "\n" +
				"METEO : " + METEO + "\n" +
				"TEMPERATURE : " + TEMPERATURE + "\n" +
				"LUNE : " + LUNE + "\n" +
				"VENT : " + VENT + "\n" +
				"NEBULOSITE : " + NEBULOSITE + "\n" +
				"HYGROMETRIE : " + HYGROMETRIE + "\n" +
				"-----------------------------------" + "\n" +
				"BIOTOPE : " + BIOTOPE + "\n" +
				"-----------------------------------" + "\n" +
				"METHODE_DOIGTS : " + METHODE_DOIGTS + "\n" +
				"POUCE : " + POUCE + "\n" +
				"GRIFFE : " + GRIFFE + "\n" +
				"PIED : " + PIED + "\n" +
				"TIBIA : " + TIBIA + "\n" +
				"QUEUE : " + QUEUE + "\n" +
				"LONG_OREILLE : " + LONG_OREILLE + "\n" +
				"LARG_OREILLE : " + LARG_OREILLE + "\n" +
				"LONG_TRAGUS : " + LONG_TRAGUS + "\n" +
				"LARG_TRAGUS : " + LARG_TRAGUS + "\n" +
				"-----------------------------------" + "\n" +
				"STATUT_REPRO : " + STATUT_REPRO + "\n" +
				"TESTICULES : " + TEST + "\n" +
				"EPID : " + EPID + "\n" +
				"TUNIQUE VAGINALE : " + TV + "\n" +
				"GESTATION : " + GESTATION + "\n" +
				"MAMELLES : " + MAMELLES + "\n" +
				"CHIN_SPOT : " + CHIN_SPOT + "\n" +
				"EPIPH : " + EPIPH + "\n" +
				"TAILLE_GLANDES : " + TAILLE_GLANDES + "\n" +
				"USURE_DENTS : " + USURE_DENTS + "\n" +
				"-----------------------------------" + "\n" +
				"BLESSURES : " + BLESSURES + "\n" +
				"MARQUAGES : " + MARQUAGES + "\n" +
				"PARASITES : " + PARASITES + "\n" +
				"PUCES : " + PUCES + "\n" +
				"TIQUES : " + TIQUES + "\n" +
				"ACARIENS : " + ACARIENS + "\n" +
				"NYCT : " + NYCT + "\n" +
				"CIMEX : " + CIMEX + "\n"
			;
			let textToBLOB = new Blob([record], {type: 'text/plain'});
			let sFileName = 'Enregistrement_' + date + '_' + time + '_' + TAXON + '_' + SEXE + '.txt';
			let newLink = document.createElement("a");
			newLink.download = sFileName;
			if (window.webkitURL != null) {
				newLink.href = window.webkitURL.createObjectURL(textToBLOB);
			}
			else {
				newLink.href = window.URL.createObjectURL(textToBLOB);
				newLink.style.display = "none";
				document.body.appendChild(newLink);
			}
			newLink.click();
		}
		</script>
  </body>
</html>
